<script>

  firebase.auth().onAuthStateChanged(function (user) {
    if (user) {
      var adviceRef = firebase.firestore().collection("user").doc(`${user.uid}`);

      var getDoc = adviceRef.get()
        .then(doc => {
          //食事に気をつけたい＆冷たいもの
          if (doc.data().habit.radio01 == "冷たいもの" && doc.data().goal == "食事に気をつけたい") {
            console.log('cold');
            var adviceRef = firebase.firestore().collection("class").doc("pattern1");
            var getDoc = adviceRef.get()
              .then(doc => {
                $('#mealAdviceTitle').text("おすすめの食材");
                $('#adviceResult0').text(doc.data().mealCold.a);
                $('#adviceResult1').text(doc.data().mealCold.b);
                $('#adviceResult2').text(doc.data().mealCold.c);
              })
          }
          //食事に気をつけたい＆冷たいもの 
          if (doc.data().habit.radio01 == "温かいもの" && doc.data().goal == "食事に気をつけたい") {
            console.log('hot');
            var adviceRef = firebase.firestore().collection("class").doc("pattern1");
            var getDoc = adviceRef.get()
              .then(doc => {
                $('#mealAdviceTitle').text("おすすめの食材");
                $('#adviceResult0').text(doc.data().mealHot.a);
                $('#adviceResult1').text(doc.data().mealHot.b);
                $('#adviceResult2').text(doc.data().mealHot.c);
              })
          }
          //仕事に専念したい
          if (doc.data().goal == "仕事に専念したい") {
            console.log('work');
            var adviceRef = firebase.firestore().collection("class").doc("pattern1");
            var getDoc = adviceRef.get()
              .then(doc => {
                $('#workAdviceTitle').text("おすすめ対策");
                $('#adviceResult0').text(doc.data().advice.a);
                $('#adviceResult1').text(doc.data().advice.b);
                $('#adviceResult2').text(doc.data().advice.c);
              })
          }
          //やせたい
          if (doc.data().goal == "やせたい") {
            console.log('diet');
            var adviceRef = firebase.firestore().collection("class").doc("pattern1");
            var getDoc = adviceRef.get()
              .then(doc => {
                $('#workAdviceTitle').text("おすすめ対策");
                $('#adviceResult0').text(doc.data().advice.a);
                $('#adviceResult1').text(doc.data().advice.b);
                $('#adviceResult2').text(doc.data().advice.c);
              })
          }
        })
    }
  });


</script>