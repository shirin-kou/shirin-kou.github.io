<script>

  var btn = $("#habitButton-inside");
  var form = $("#habit-form");
  form.on('submit', check)

  // 各radioにvalueが入っているかcheck
  async function check(e) {
    e.preventDefault()
    if ((document.form1.radio00.value) && (document.form1.radio01.value) && (document.form1.radio02.value) &&
      (document.form1.radio03.value) && (document.form1.radio04.value)) {

      //有効にする
      btn.disabled = "false";
      alert("登録しました！あなたの習慣に合わせたアドバイスをします。");

      // var user = firebase.auth().currentUser

      await firebase.firestore().collection('user').doc(`${user.uid}`)
        .set({
          habit: {
            'radio00': document.form1.radio00.value,
            'radio01': document.form1.radio01.value,
            'radio02': document.form1.radio02.value,
            'radio03': document.form1.radio03.value,
            'radio04': document.form1.radio04.value,
          }
        }, { merge: true })

      location.href = "/"

    } else {

      alert("※未選択の質問があります。");

      //無効にする
      btn.disabled = "true";

    }

  }

</script>