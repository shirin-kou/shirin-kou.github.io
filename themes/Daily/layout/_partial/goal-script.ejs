<script>

  $('.goalImage').on("click", async function (e) {
    e.preventDefault()

    var user = firebase.auth().currentUser

    // await firebase.firestore().collection('user').doc(`${user.uid}`)
    await firebase.firestore().collection('user').doc("Hq3QlNZhc2ZizmszVe96lN6bvgA3")
      .set({
        goal: this.value,
      }, { merge: true })

    location.href = "/goal-2/"

  });

  //goal登録済み確認
  const goalPattern = '/goal-2/'
  const isGoalPage = !!location.href.match(goalPattern)

  var habitRef = firebase.firestore().collection("user").doc("Hq3QlNZhc2ZizmszVe96lN6bvgA3");
  // var habitRef = firebase.firestore().collection("user").doc(`${user.uid}`);
  var getDoc = habitRef.get()
    .then(doc => {
      if (!doc.exists) {
        console.log('No such document!');

      } else {

        if (!isGoalPage) {
          // location.href = '/goal-2/'

        }
      }
    })

    .catch(err => {
      console.log('Error getting document:', err);
    });

</script>