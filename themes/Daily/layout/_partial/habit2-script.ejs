<script>

  firebase.auth().onAuthStateChanged(function (user) {
    if (user) {
      var habitRef = firebase.firestore().collection("user").doc(`${user.uid}`);

      // habit-fieldがあるかcheck
      // ある場合、選択した内容を＠habit-2で表示
      // ない場合、現在の設定 ＠habitを非表示＊未解決
      var getDoc = habitRef.get()
        .then(doc => {
          if (!doc.data().habit) {
            console.log('No such habit document!');

          } else {
            console.log('Document data:', doc.data().habit);
            $('#habitResult0').text(doc.data().habit.radio00);
            $('#habitResult1').text(doc.data().habit.radio01);
            $('#habitResult2').text(doc.data().habit.radio02);
            $('#habitResult3').text(doc.data().habit.radio03);
            $('#habitResult4').text(doc.data().habit.radio04);

            //現在の設定を表示
            $("#habitButton-inside").show();

          }
        })

      //delete habit-field
      $('#habitButton-delete').on("click", async function (e) {
        e.preventDefault()

        // Remove the 'habit' field from the document
        var removeHabit = await habitRef.update({
          habit: firebase.firestore.FieldValue.delete()
        });

        location.href = '/habit/'

      });
    }
  });

</script>